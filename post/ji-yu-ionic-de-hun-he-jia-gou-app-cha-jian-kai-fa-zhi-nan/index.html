<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>åŸºäºIonicçš„æ··åˆæ¶æ„Appæ’ä»¶å¼€å‘æŒ‡å— | It&#39;s my life</title>
<link rel="shortcut icon" href="https://merpyzf.github.io/favicon.ico?v=1599288499384">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://merpyzf.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="åŸºäºIonicçš„æ··åˆæ¶æ„Appæ’ä»¶å¼€å‘æŒ‡å— | It&#39;s my life - Atom Feed" href="https://merpyzf.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="
å¼€å§‹å‰å‡†å¤‡
1. æ‰€éœ€å¼€å‘ç¯å¢ƒ

NodeJs : http://nodejs.cn/
Ionic : https://ionicframework.com/
Cordova : https://cordova.apache.org/
A..." />
    <meta name="keywords" content="" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://merpyzf.github.io">
  <img class="avatar" src="https://merpyzf.github.io/images/avatar.png?v=1599288499384" alt="">
  </a>
  <h1 class="site-title">
    It&#39;s my life
  </h1>
  <p class="site-description">
    çœŸæ­£çš„å…‰èŠ’ï¼Œéœ€è¦ä¸€ç‚¹ç‚¹æ—¶é—´
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              åŸºäºIonicçš„æ··åˆæ¶æ„Appæ’ä»¶å¼€å‘æŒ‡å—
            </h2>
            <div class="post-info">
              <span>
                2020-09-03
              </span>
              <span>
                24 min read
              </span>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <figure data-type="image" tabindex="1"><img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/timg.jpeg" alt="" loading="lazy"></figure>
<h2 id="å¼€å§‹å‰å‡†å¤‡">å¼€å§‹å‰å‡†å¤‡</h2>
<h3 id="1-æ‰€éœ€å¼€å‘ç¯å¢ƒ">1. æ‰€éœ€å¼€å‘ç¯å¢ƒ</h3>
<ol>
<li>NodeJs : http://nodejs.cn/</li>
<li>Ionic : https://ionicframework.com/</li>
<li>Cordova : https://cordova.apache.org/</li>
<li>Android : https://developer.android.google.cn/studio/</li>
<li>Plugman : https://cordova.apache.org/docs/en/latest/guide/hybrid/plugins/index.html#validating-a-plugin-using-plugman</li>
<li>Ionic Native : https://github.com/ionic-team/ionic-native</li>
</ol>
<h3 id="2-æ‰€éœ€å‰ç½®æŠ€èƒ½">2. æ‰€éœ€å‰ç½®æŠ€èƒ½</h3>
<ol>
<li>JavaScript è¯­æ³•åŸºç¡€</li>
<li>TypeScript è¯­æ³•åŸºç¡€</li>
<li>Java è¯­æ³•åŸºç¡€</li>
<li>Android SDK åŸºç¡€ç”¨æ³•</li>
</ol>
<h2 id="æ’ä»¶ç¼–å†™å¼€å‘å®è·µ">æ’ä»¶ç¼–å†™å¼€å‘å®è·µ</h2>
<p>ä»¥è°ƒç”¨ Android åŸç”Ÿ Toast å®ç°æ¶ˆæ¯æç¤ºä¸ºä¾‹</p>
<h3 id="æ¡ˆä¾‹è¿è¡Œæ•ˆæœ">æ¡ˆä¾‹è¿è¡Œæ•ˆæœï¼š</h3>
<img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/Shell_2020-09-04-19-57-00-475.png" width = "300" />
<h2 id="1-åˆ›å»ºæ’ä»¶åŒ…">1. åˆ›å»ºæ’ä»¶åŒ…</h2>
<h3 id="ä½¿ç”¨-plugman-cli-åˆ›å»ºä¸€ä¸ªç©ºçš„æ’ä»¶">ä½¿ç”¨ Plugman CLI åˆ›å»ºä¸€ä¸ªç©ºçš„æ’ä»¶</h3>
<h4 id="a-è¿›å…¥åˆ°è‡ªå·±å­˜æ”¾æ’ä»¶çš„ç›®å½•">a. è¿›å…¥åˆ°è‡ªå·±å­˜æ”¾æ’ä»¶çš„ç›®å½•</h4>
<h4 id="b-æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ›å»ºæ’ä»¶-æ·»åŠ æ’ä»¶æ‰€è¦æ”¯æŒçš„å¹³å°">b. æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ›å»ºæ’ä»¶ &amp; æ·»åŠ æ’ä»¶æ‰€è¦æ”¯æŒçš„å¹³å°</h4>
<p>åˆ›å»ºæ’ä»¶</p>
<pre><code>plugman create --name ToastPlugin --plugin_id com.zijin.toastplugin --plugin_version 0.0.1
</code></pre>
<p>ä¸ºæ’ä»¶æ·»åŠ æ‰€è¦æ”¯æŒçš„å¹³å°</p>
<pre><code>plugman platform add --platform_name android
</code></pre>
<p>æ‰§è¡Œä¸Šè¿°ä¸¤ä¸ªå‘½ä»¤åå°†ç”Ÿæˆå¦‚ä¸‹çš„ç»“æ„ï¼š</p>
<figure data-type="image" tabindex="2"><img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/1599105348815.png" alt="" loading="lazy"></figure>
<h3 id="ç”Ÿæˆæ’ä»¶åŒ…ä¸­æ¯ä¸ªæ–‡ä»¶çš„ä½œç”¨">ç”Ÿæˆæ’ä»¶åŒ…ä¸­æ¯ä¸ªæ–‡ä»¶çš„ä½œç”¨ï¼š</h3>
<h4 id="a-pluginxml">a. plugin.xml</h4>
<p>plugin.xml ä¸­å®šä¹‰äº†æ’ä»¶æœ€åç”Ÿæˆå¹³å°ä»£ç æ—¶çš„æ–‡ä»¶ç»“æ„ä»¥åŠé’ˆå¯¹androidå¹³å°çš„ä¸€äº›è®¾ç½®ã€‚</p>
<p>ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre><code>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;!-- idï¼šå³é€šè¿‡ plugman cli åˆ›å»ºæ’ä»¶åŒ…æ—¶é…ç½®çš„ pluginID --&gt;
&lt;plugin id=&quot;com.zijin.toastplugin&quot; version=&quot;1.0.0&quot; xmlns=&quot;http://apache.org/cordova/ns/plugins/1.0&quot;
        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;
    &lt;!-- pluginNameï¼šå³é€šè¿‡ plugman cli åˆ›å»ºæ’ä»¶åŒ…æ—¶é…ç½®çš„ pluginName --&gt;
    &lt;name&gt;ToastPlugin&lt;/name&gt;
    &lt;!-- âš ï¸ js-module æ ‡ç­¾ç”¨äºå‘å¸ƒå®šä¹‰æ’ä»¶åŠŸèƒ½çš„jsæ–‡ä»¶åœ¨webç«¯çš„è°ƒç”¨æ–¹å¼ã€‚å…¶ä¸­çš„ clobbers æ ‡ç­¾çš„
    ä½œç”¨ç”¨äºå°† www/ToastPlugin.js æ–‡ä»¶ä¸­å®šä¹‰çš„æ¥å£å‘å¸ƒåˆ° window å¯¹è±¡ä¸Šï¼Œè¿™æ · web ç«¯å°±å¯ä»¥ç›´æ¥é€šè¿‡
     cordova.plugins.ToastPlugin å¯¹è±¡æ¥è°ƒç”¨æš´éœ²çš„æ–¹æ³•å»è®¿é—®æ’ä»¶çš„åŠŸèƒ½ã€‚

     âš ï¸ å½“æ‰§è¡Œ plugin install çš„å‘½ä»¤å®‰è£…æ’ä»¶æ—¶ cli ä¼šå°† www/ToastPlugin.js æ‹·è´åˆ° platforms/android/platform_ww/
     plugins/cordova-toast-plugin ç›®å½•ä¸‹ã€‚
      --&gt;
    &lt;js-module name=&quot;ToastPlugin&quot; src=&quot;www/ToastPlugin.js&quot;&gt;
        &lt;clobbers target=&quot;cordova.plugins.ToastPlugin&quot;/&gt;
    &lt;/js-module&gt;
    &lt;!--  é’ˆå¯¹äº Android å¹³å°çš„é…ç½®--&gt;
    &lt;platform name=&quot;android&quot;&gt;
        &lt;!--  è¯¥ config-file æ ‡ç­¾ä¼šå°†å…¶å†…éƒ¨çš„å­æ ‡ç­¾è¿½åŠ åˆ° platforms/android/app/src/main/res/xml/config.xml ä¸‹--&gt;
        &lt;config-file parent=&quot;/*&quot; target=&quot;res/xml/config.xml&quot;&gt;
            &lt;!-- âš ï¸ feature æ ‡ç­¾ä¸‹çš„ name å®šä¹‰äº†æ’ä»¶åœ¨ ToastPlugin.js ä¸­è°ƒç”¨æ’ä»¶çš„åç§° exec(success, error, 'ToastPlugin',
             'coolMethod', [arg0])ï¼›âš ï¸ æ³¨æ„ï¼šç¬¬ä¸‰ä¸ªå‚æ•°è¦æ­¤æ ‡ç­¾çš„nameä¿æŒä¸€è‡´ï¼Œå¦åˆ™åœ¨è¿è¡Œæ—¶å°†æ— æ³•æ‰¾åˆ°æ’ä»¶ã€‚
            --&gt;
            &lt;feature name=&quot;ToastPlugin&quot;&gt;
                &lt;!-- param æ ‡ç­¾å®šä¹‰ ToastPlugin.java ä¸­ ToastPlugin ç±»çš„å…¨è·¯å¾„ã€‚ç”¨äº Cordova Framework åœ¨è¿è¡Œçš„æ—¶å€™èƒ½å¤Ÿæ ¹æ®ç±»çš„å…¨è·¯å¾„
                       é€šè¿‡åå°„æœºåˆ¶æ¥å®ä¾‹åŒ–ToastPluginå¯¹è±¡ã€‚
                       âš ï¸ æ³¨æ„ï¼šæ­¤å¤„ package çš„è·¯å¾„ä¸€å®šè¦ä¸ source-file ä¸­ target-dir çš„å±æ€§å€¼ä¿æŒ
                       ç»Ÿä¸€ã€‚å¦åˆ™åœ¨é€šè¿‡åå°„è¿›è¡Œå®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™å°†ä¼šå‡ºç°ç±»æ‰¾ä¸åˆ°çš„å¼‚å¸¸ã€‚
                       âš ï¸ å¦‚æœä½ éœ€è¦è¯´ç¼–å†™çš„æ’ä»¶åœ¨åº”ç”¨å¯åŠ¨çš„æ—¶å€™å°±å»åˆ›å»ºï¼Œé‚£ä¹ˆéœ€è¦å†æ·»åŠ  &lt;param name=&quot;onload&quot; value=&quot;true&quot; /&gt;ï¼Œé»˜è®¤
                       çš„åŠ è½½æ–¹å¼ä¸ºè°ƒç”¨æ’ä»¶æ—¶é‡‡å–åˆ›å»ºæ’ä»¶ã€‚
                       --&gt;
                &lt;param name=&quot;android-package&quot; value=&quot;com.zijin.toastplugin.ToastPlugin&quot;/&gt;
            &lt;/feature&gt;
        &lt;/config-file&gt;
        &lt;!-- âš ï¸ è¯¥ config-file æ ‡ç­¾ä¼šå°†å…¶å†…éƒ¨çš„å­æ ‡ç­¾æœ€åŠ åˆ° AndroidManifest.xml æ–‡ä»¶çš„æ ¹è·¯å¾„ä¸‹å³ manifest æ ‡ç­¾ä¸‹ã€‚
            æ­¤æ–‡ä»¶ä¸»è¦ç”¨äºä¸ºAndroidå¹³å°é…ç½®æƒé™ã€å£°æ˜åˆ›å»ºçš„æœåŠ¡ã€å£°æ˜åˆ›å»ºçš„å¹¿æ’­ã€å£°æ˜åˆ›å»ºçš„æ´»åŠ¨ã€è®¾ç½®åº”ç”¨æ‰€èƒ½å…¼å®¹çš„Androidç³»ç»Ÿçš„ç‰ˆæœ¬ç­‰ã€‚

            å…³äº AndroidManifest.xml çš„ç”¨æ³•å‚è€ƒï¼š https://developer.android.com/guide/topics/manifest/manifest-intro?hl=zh-cn
            --&gt;
        &lt;config-file parent=&quot;/*&quot; target=&quot;AndroidManifest.xml&quot;&gt;
            &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot;/&gt;
        &lt;/config-file&gt;
        &lt;!-- âš ï¸ è¯¥ source-file æ ‡ç­¾ä¸»è¦ç”¨äºæŒ‡å®šæ’ä»¶åŒ…ä¸­çš„æ–‡ä»¶åœ¨æ‰§è¡Œ plugin install å‘½ä»¤åæ‰€è¢«æ‹·è´åˆ°Androidå¹³å°é¡¹ç›®ä¸­çš„ä½ç½®ã€‚
             âš ï¸ æ­¤å¤„æ‹·è´åˆ°çš„è·¯å¾„ç›¸å¯¹äº platforms/android/appï¼Œå³ platforms/android/app ä¸ºæ ¹ç›®å½•ã€‚
        --&gt;
        &lt;source-file src=&quot;src/android/ToastPlugin.java&quot; target-dir=&quot;src/com/zijin/toastplugin/ToastPlugin&quot;/&gt;
    &lt;/platform&gt;
&lt;/plugin&gt;
</code></pre>
<h4 id="b-srcandroidtoastpluginjava">b. src/android/ToastPlugin.java</h4>
<p>ToastPlugin ç±»ç»§æ‰¿è‡ª CordovaPlugin ï¼Œéœ€è¦å»é‡å†™ execute æ–¹æ³•ï¼Œåœ¨æ­¤æ–¹æ³•ä¸­æ ¹æ® action å“åº”å‰ç«¯çš„æ–¹æ³•è°ƒç”¨ï¼Œä»¥å®ç°å¯¹å¹³å°å±‚åŠŸèƒ½çš„è°ƒç”¨ã€‚</p>
<h4 id="c-wwwtoastpluginjs">c. www/ToastPlugin.js</h4>
<p>å‘ Web å¹³å°æš´éœ²æ’ä»¶æ‰€æ‹¥æœ‰çš„æ–¹æ³•ï¼Œä¸ºå‰ç«¯æä¾›å±è”½åŸç”Ÿå¹³å°ï¼ˆAndroid/iOSï¼‰çš„æ’ä»¶åŠŸèƒ½ç»Ÿä¸€æ–¹æ³•çš„è°ƒç”¨ã€‚</p>
<h3 id="å‘½ä»¤å‚æ•°å«ä¹‰">å‘½ä»¤å‚æ•°å«ä¹‰</h3>
<pre><code>plugman create --name &lt;pluginName&gt; --plugin_id &lt;pluginID&gt; --plugin_version &lt;version&gt; [--path &lt;directory&gt;] 
</code></pre>
<p>ğŸ‘†ä»¥ä¸Šå‘½ä»¤å„å‚æ•°å«ä¹‰ï¼š</p>
<ol>
<li>pluginNameï¼š æ’ä»¶åç§°</li>
<li>pluginIDï¼š æ’ä»¶idï¼ˆå³ç”ŸæˆToastPlugin.javaçš„åŒ…åï¼‰</li>
<li>versionï¼šæ’ä»¶çš„ç‰ˆæœ¬æè¿°</li>
<li>directoryï¼šä¸€ä¸ªç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„ï¼Œæ’ä»¶å°†ä»¥è¯¥è·¯å¾„ä½œä¸ºæ’ä»¶çš„å­˜æ”¾ç›®å½•ï¼Œç¼ºçœä»¥å½“æ‰§è¡Œå‘½ä»¤çš„ç›®å½•æ¥æ”¾ç½®æ’ä»¶åŒ…</li>
</ol>
<h2 id="2-å°†ç©ºçš„æ’ä»¶åŒ…å®‰è£…åˆ°-ionic-é¡¹ç›®">2. å°†ç©ºçš„æ’ä»¶åŒ…å®‰è£…åˆ° ionic é¡¹ç›®</h2>
<h3 id="a-ç¼–å†™-wwwtoastpluginjs-å®šä¹‰æ’ä»¶åŠŸèƒ½æ–¹æ³•">a. ç¼–å†™ www/ToastPlugin.js å®šä¹‰æ’ä»¶åŠŸèƒ½æ–¹æ³•</h3>
<pre><code>var exec = require('cordova/exec');
/**
 * 
 * @param  msgInfo js å¯¹è±¡ï¼ŒåŒ…å« msg å’Œ showLength ä¸¤ä¸ªå±æ€§
 * @param  success js å‡½æ•°å¯¹è±¡ï¼Œå½“æ’ä»¶åŠŸèƒ½è°ƒç”¨æˆåŠŸæ—¶å›è°ƒ
 * @param  error js å‡½æ•°å¯¹è±¡ï¼Œå½“æ’ä»¶åŠŸèƒ½è°ƒç”¨å¤±è´¥æ—¶å›è°ƒ
 */
exports.showToast = function (msgInfo, success, error) {
    exec(success, error, 'ToastPlugin', 'showToast', msgInfo);
};
</code></pre>
<p>é€šè¿‡å°†ç©ºçš„æ’ä»¶åŒ…å®‰è£…åˆ°å·²æœ‰çš„ Ionic é¡¹ç›®èƒ½å¤Ÿå¿«é€Ÿçš„è®©æˆ‘ä»¬è·å¾— Cordova Framework çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œä»¥æ­¤æ¥è·å¾— IDE ä»£ç æç¤ºçš„æ”¯æŒã€å®ç°å¯¹æ’ä»¶åŠŸèƒ½çš„ç¼–è¯‘è¿è¡Œä»¥è¿›è¡Œå¿«é€Ÿçš„åŠŸèƒ½è°ƒè¯•ã€‚</p>
<h3 id="b-è¿›å…¥åˆ°æ’ä»¶åŒ…æ‰€åœ¨çš„ç›®å½•ä½¿ç”¨-npm-init-å‘½ä»¤åˆå§‹åŒ–æ’ä»¶åŒ…ï¸å¦åˆ™æ— æ³•æ‰§è¡Œåç»­æ­¥éª¤">b. è¿›å…¥åˆ°æ’ä»¶åŒ…æ‰€åœ¨çš„ç›®å½•ï¼Œä½¿ç”¨ npm init å‘½ä»¤åˆå§‹åŒ–æ’ä»¶åŒ…ï¼ˆâš ï¸å¦åˆ™æ— æ³•æ‰§è¡Œåç»­æ­¥éª¤ï¼‰</h3>
<h3 id="c-å®‰è£…æ’ä»¶åˆ°-ionic-é¡¹ç›®">c. å®‰è£…æ’ä»¶åˆ° ionic é¡¹ç›®</h3>
<pre><code>ionic cordova plugin add ../ToastPlugin
</code></pre>
<p>add åé¢ä¸ºæ’ä»¶åŒ…çš„è·¯å¾„åœ°å€ï¼Œå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ã€‚</p>
<p>åœ¨å®‰è£…æ’ä»¶æ—¶å¦‚æœ Ionic é¡¹ç›®è¿˜æ²¡æœ‰é›†æˆ Cordova å¹³å°ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œå®‰è£…æ’ä»¶çš„å‘½ä»¤æ—¶ Ionic çš„ CLI å°†ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬é›†æˆ Cordova çš„ç¯å¢ƒã€‚</p>
<p>å‘½ä»¤æ‰§è¡Œçš„è¿è¡Œå›¾å¦‚ä¸‹ï¼š</p>
 <img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/1599118069842.png" width = "600" />
<p>æˆ–åœ¨å®‰è£…æ’ä»¶å‰å°±é€šè¿‡ <code>ionic integrations enable cordova</code> å‘½ä»¤æå‰å¯ç”¨ Cordova ç¯å¢ƒã€‚</p>
<h3 id="3-ç¼–è¯‘ç”Ÿæˆå¹³å°ä»£ç ">3. ç¼–è¯‘ç”Ÿæˆå¹³å°ä»£ç </h3>
<p>é€šè¿‡æ‰§è¡Œ <code>ionic cordova platform add android</code>  å‘½ä»¤æ¥ç”Ÿæˆ Android å¹³å°çš„ä»£ç ã€‚</p>
 <img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/1599119545540.png" width = "300" />
<p>âš ï¸å¦‚æœæƒé™ä¸è¶³ï¼Œè¯·ä½¿ç”¨ è¶…çº§ç®¡ç†å‘˜æƒé™ æˆ– sudo æ¥æ‰§è¡Œä¸Šè¿°å‘½ä»¤ã€‚</p>
<p>å…³äºè¯¥å‘½ä»¤çš„è¯¦ç»†ä»‹ç»ï¼šhttps://ionicframework.com/docs/cli/commands/cordova-platform</p>
<h3 id="4-ä½¿ç”¨-androidstudio-å¯¼å…¥ç”Ÿæˆçš„å¹³å°ä»£ç ">4. ä½¿ç”¨ AndroidStudio å¯¼å…¥ç”Ÿæˆçš„å¹³å°ä»£ç </h3>
<h3 id="a-æ‰“å¼€-androidstuido-é€‰æ‹©-open-an-existing-android-studio-project">a. æ‰“å¼€ AndroidStuido é€‰æ‹© Open an existing android studio project</h3>
 <img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/1599121134994.png" width = "600" />
<h3 id="b-é€‰æ‹©-platformsandroid-æ‰€åœ¨çš„ç›®å½•æ‰§è¡Œå¯¼å…¥">b. é€‰æ‹© platforms/android  æ‰€åœ¨çš„ç›®å½•æ‰§è¡Œå¯¼å…¥ã€‚</h3>
 <img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/1599121248417.png" width = "600" />
<p>âš ï¸ åœ¨macå¹³å°ä¸‹ï¼Œç‚¹å‡» open åï¼Œå¦‚æœå‡ºç°å¦‚ä¸‹ permission denied é”™è¯¯æç¤ºï¼Œè¯·ä½¿ç”¨ <code>sudo chmod -R 777 platforms/android</code>  ä¸º android ä¸‹çš„æ‰€æœ‰æ–‡ä»¶è¿½åŠ æƒé™ã€‚</p>
  <img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/1599121474498.png" width = "600" />
<p>âš ï¸ å¯¼å…¥å AndroidStudio å°†è‡ªåŠ¨æ‰§è¡Œ Gradle è„šæœ¬æ¥ä¸‹è½½é¡¹ç›®ä¸­ä¾èµ–çš„ä¸‰æ–¹åº“å¹¶æ„å»ºé¡¹ç›®ï¼Œç”±äºå›½å†…çš„ç½‘ç»œç¯å¢ƒï¼Œè¿™é‡Œå¾ˆå¯èƒ½ä¼šå› ä¸ºç½‘ç»œè¿æ¥è€Œå¯¼è‡´ä¾èµ–ä¸‹è½½å‡ºé”™ï¼Œå¦‚æœå‡ºé”™ï¼Œè¯·å¤§å®¶å¼€å¯ç§‘å­¦ä¸Šç½‘å·¥å…·åå†è¿›è¡Œæ„å»ºã€‚</p>
<img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/1599121706643.png" width = "600" />
<h3 id="c-gradleæ„å»ºæˆåŠŸ">c. Gradleæ„å»ºæˆåŠŸ</h3>
<p>å½“Gradleå®Œæˆé¡¹ç›®æ„å»ºåï¼ŒAS ä¼šä»¥ Android é¡¹ç›®çš„ç›®å½•ç»“æ„è¿›è¡Œå±•ç¤ºï¼ŒåŒæ—¶å¯ä»¥çœ‹åˆ°è¿è¡ŒæŒ‰é’®ã€‚</p>
<img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/1599123505691.png" width = "600" />
<p>åœ¨å¼€å‘è€…é€‰é¡¹ä¸­å¼€å¯ Android ç³»ç»Ÿçš„è°ƒè¯•æ¨¡å¼åé€šè¿‡ USB æ•°æ®çº¿è¿æ¥ä¸Šç”µè„‘ AS å³å¯è¯†åˆ«åˆ°ä½ çš„è®¾å¤‡ï¼Œå¦‚æœæ‰‹ä¸Šæ²¡æœ‰ Android çœŸæœºï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ AS æä¾›çš„æ¨¡æ‹Ÿå™¨æ¥è¿›è¡Œæ’ä»¶å¼€å‘ã€‚</p>
<p>å…³äºæ¨¡æ‹Ÿå™¨çš„ä½¿ç”¨è¯·å‚è€ƒï¼šhttps://developer.android.com/studio/run/emulator?hl=zh-cn</p>
<h3 id="d-è¿è¡Œé¡¹ç›®åˆ°è®¾å¤‡">d. è¿è¡Œé¡¹ç›®åˆ°è®¾å¤‡</h3>
<p>ç‚¹å‡»ç»¿è‰²è¿è¡ŒæŒ‰é’®å³å¯å°† Ionic çš„é¡¹ç›®æ‰“åŒ…æˆ apk è¿è¡Œåˆ°ä½ è¿æ¥çš„è®¾å¤‡ä¸­ã€‚</p>
<img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/1599124013572.png" width = "300" />
<h3 id="4-å¼€å§‹æ’ä»¶åŠŸèƒ½å¼€å‘">4. å¼€å§‹æ’ä»¶åŠŸèƒ½å¼€å‘</h3>
<p>æ‰“å¼€ ionic é¡¹ç›®ï¼Œç¤ºä¾‹é¡¹ç›®çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/1599185456217.png" width = "300" />
<p>åœ¨ home.page.ts æ¥è°ƒç”¨æ’ä»¶ï¼ˆToastPlugin.jsï¼‰å‘å‰ç«¯æš´éœ²å‡ºçš„åŠŸèƒ½æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>import {Component} from '@angular/core';
// 1. ä½¿ç”¨ declare å£°æ˜è¯­å¥æ¥å®šä¹‰ window çš„ç±»å‹ï¼Œç”±äº window æ˜¯ JavaScript ä¸­çš„å¯¹è±¡ï¼ŒTypeScriptä¸­å¹¶ä¸å­˜åœ¨ï¼Œä¸ºäº†èƒ½å¤Ÿé€šè¿‡ç¼–è¯‘ï¼Œå¿…é¡»è¦è¿›è¡Œå£°æ˜ã€‚
declare const window: any;

@Component({
    selector: 'app-home',
    templateUrl: 'home.page.html',
    styleUrls: ['home.page.scss'],
})
export class HomePage {
    constructor() {
    }

    showToast() {
        // 2. é€šè¿‡ window å¯¹è±¡æ¥è°ƒç”¨æ’ä»¶ä¸­çš„æ–¹æ³•
        window.cordova.plugins.ToastPlugin.showToast({msg: 'hello, cordova plugin!', showLength: 'short'}, success =&gt; {
            console.log(success);
        }, error =&gt; {
            console.log(error);
        });
    }
}
</code></pre>
<p>æ­¤æ—¶å½“åœ¨å‰ç«¯ç‚¹å‡» æ‰“å°æ¶ˆæ¯ çš„æŒ‰é’®æ—¶å°†ä¼šè§¦å‘ Android å±‚ä¸‹çš„ ToastPlugin çš„ execute æ–¹æ³•ã€‚æ¥ä¸‹æ¥å°†åœ¨ Android å±‚ç¼–å†™æ’ä»¶çš„åŠŸèƒ½ä»£ç ã€‚</p>
<p>Cordova ä½¿ç”¨ JSON ä½œä¸ºå‰ç«¯åˆ° Android æ’ä»¶å±‚çš„æ¶ˆæ¯ä¼ é€’æ ¼å¼ã€‚åœ¨æ’ä»¶å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦å¯¹å¤æ‚æ ¼å¼çš„JSONæ•°æ®è¿›è¡Œè§£æï¼ŒAndroid SDK ä¸ºæˆ‘ä»¬æä¾›äº†åŸç”Ÿçš„ JSON è§£æç±»ï¼Œä½†è§£æéœ€è¦æ‰‹åŠ¨çš„å»å–æ¯ä¸€æ¡å†…å®¹ï¼Œä¸ºäº†èƒ½å¤Ÿå¿«é€Ÿæ–¹ä¾¿çš„å®ç°å¯¹ JSON æ•°æ®çš„è§£æï¼Œè¿™é‡Œæˆ‘ä»¬å¼•å…¥Gson æ¥å¸®æˆ‘ä»¬è‡ªåŠ¨å®Œæˆæ•°æ®çš„è§£æå·¥ä½œã€‚</p>
<p>ä»¥å¼•å…¥ Gson åº“ä¸ºä¾‹ï¼Œä»‹ç»ä¸¤ç§å¼•å…¥ä¸‰æ–¹åº“çš„æ–¹å¼ï¼š</p>
<ol>
<li>é€šè¿‡å‘ src/main/libs ç›®å½•å¯¼å…¥ä¸‹è½½çš„ jar æˆ– aar åŒ…å®Œæˆå¯¹ä¸‰æ–¹åº“çš„å¼•å…¥ã€‚</li>
<li>é€šè¿‡ Gradle å®Œæˆå¯¹ä¸‰æ–¹åº“çš„å¼•å…¥ã€‚</li>
</ol>
<p>ğŸ­ æ¨èçš„æ–¹å¼ï¼šå°½å¯èƒ½å»ä½¿ç”¨ç¬¬2ç§æ–¹å¼æ¥å®Œæˆå¯¹ä¸‰æ–¹åº“çš„å¼•å…¥ã€‚<br>
åŸå› ï¼šç”±äºæˆ‘ä»¬çš„é¡¹ç›®è¿˜ä¼šå»å¼•å…¥åˆ«çš„ä¸‰æ–¹æ’ä»¶ï¼Œæœ‰äº›æ—¶å€™æ— å¯é¿å…çš„ä¼šé‡åˆ°åˆ«çš„æ’ä»¶å¼•ç”¨äº†å’Œä½ ç›¸åŒçš„ä¸‰æ–¹åº“ï¼Œå¦‚æœé€šè¿‡æ‰‹åŠ¨ä¸‹è½½ jar åŒ…çš„æ–¹å¼å»å¼•å…¥å°†ä¼šå‡ºç° jar åŒ…å†²çªçš„é”™è¯¯ã€‚</p>
<p>ä¸‹é¢é€šè¿‡å‘ app ä¸‹çš„ build.gradle ä¸­çš„ dependencies é—­åŒ…ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<pre><code>    implementation 'com.google.code.gson:gson:2.6.1'
</code></pre>
<p>ä¿®æ”¹ build.gradle æ–‡ä»¶ç‚¹å‡»å³ä¸Šè§’çš„ sync now å°†è‡ªåŠ¨å®Œæˆå¯¹æ–°å¢ä¾èµ–çš„ä¸‹è½½ã€‚ä¾èµ–å®Œæˆåï¼Œæˆ‘ä»¬å¼€å§‹åœ¨ ToastPlugin.java ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code>public class ToastPlugin extends CordovaPlugin {
    @Override
    public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException {
        if (action.equals(&quot;showToast&quot;)) {
            Gson gson = new Gson();
            List&lt;MsgInfo&gt; msgInfoList = gson.fromJson(args.toString(), new TypeToken&lt;List&lt;MsgInfo&gt;&gt;() {
            }.getType());
            this.showToast(msgInfoList, callbackContext);
            return true;
        }
        return false;
    }

    private void showToast(List&lt;MsgInfo&gt; msgInfoList, CallbackContext callbackContext) {
        MsgInfo msgInfo = null;
        if (msgInfoList != null &amp;&amp; msgInfoList.size() &gt; 0) {
            msgInfo = msgInfoList.get(0);
        } else {
            callbackContext.error(&quot;å‚æ•°å¼‚å¸¸&quot;);
            return;
        }
        if (&quot;short&quot;.equals(msgInfo.getShowLength())) {
            Toast.makeText(cordova.getContext(), msgInfo.getMsg(), Toast.LENGTH_SHORT).show();
            callbackContext.success(&quot;æ¶ˆæ¯æç¤ºæˆåŠŸ&quot;);
        } else if (&quot;long&quot;.equals(msgInfo.getShowLength())) {
            Toast.makeText(cordova.getContext(), msgInfo.getMsg(), Toast.LENGTH_LONG).show();
            callbackContext.success(&quot;æ¶ˆæ¯æç¤ºæˆåŠŸ&quot;);
        } else {
            callbackContext.error(&quot;å‚æ•°å¼‚å¸¸&quot;);
        }
    }
}
</code></pre>
<h3 id="å…³äºä¸Šé¢çš„ä»£ç éœ€è¦æ³¨æ„çš„å‡ ä¸ªç‚¹">å…³äºä¸Šé¢çš„ä»£ç éœ€è¦æ³¨æ„çš„å‡ ä¸ªç‚¹ï¼š</h3>
<h4 id="a-å¯¹äºè¦å®ç°æ’ä»¶åŠŸèƒ½çš„ç±»éœ€è¦ç»§æ‰¿-cordovaplugin-å¹¶é‡å†™-execute-æ–¹æ³•æ¥å¤„ç†å‰ç«¯å¯¹æ’ä»¶åŠŸèƒ½çš„è°ƒç”¨">a. å¯¹äºè¦å®ç°æ’ä»¶åŠŸèƒ½çš„ç±»éœ€è¦ç»§æ‰¿ CordovaPlugin å¹¶é‡å†™ execute æ–¹æ³•æ¥å¤„ç†å‰ç«¯å¯¹æ’ä»¶åŠŸèƒ½çš„è°ƒç”¨ã€‚</h4>
<h4 id="b-execute-æ–¹æ³•å‚æ•°åŠè¿”å›å€¼çš„ä½œç”¨">b. execute æ–¹æ³•å‚æ•°åŠè¿”å›å€¼çš„ä½œç”¨ã€‚</h4>
<h5 id="execute-æ–¹æ³•çš„ä¸‰ä¸ªå‚æ•°çš„å«ä¹‰">execute æ–¹æ³•çš„ä¸‰ä¸ªå‚æ•°çš„å«ä¹‰ï¼š</h5>
<ol>
<li>
<p>String actionï¼šaction ä¸ºå‰ç«¯è°ƒç”¨æ’ä»¶çš„æ–¹æ³•åç§°ï¼Œåœ¨æ’ä»¶å¼€å‘ä¸­æˆ‘ä»¬ä¼šæ ¹æ® action çš„å€¼çš„ä¸åŒå»å®ç°ä¸åŒçš„åŠŸèƒ½ã€‚</p>
</li>
<li>
<p>JSONArray argsï¼šargs ä¸ºå‰ç«¯è°ƒç”¨æ’ä»¶æ–¹æ³•æ—¶ä¼ é€’çš„å‚æ•°å€¼ï¼Œæ˜¯ä¸€ä¸ª JSONArray å¯¹è±¡ã€‚</p>
</li>
<li>
<p>CallbackContext callbackContextï¼šcallbackContext ä¸ºæœ¬æ¬¡æ’ä»¶æ–¹æ³•è°ƒç”¨æ—¶çš„å›è°ƒä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œä¸»è¦åŠŸèƒ½æ˜¯è´Ÿè´£å¤„ç†æ’ä»¶åˆ°å‰ç«¯çš„æ¶ˆæ¯ä¼ é€’ã€‚</p>
</li>
</ol>
<h5 id="execute-æ–¹æ³•è¿”å›å€¼çš„å«ä¹‰">execute æ–¹æ³•è¿”å›å€¼çš„å«ä¹‰ï¼š</h5>
<p>action çš„å€¼ä¸ºå‰ç«¯è°ƒç”¨æ’ä»¶åŠŸèƒ½æ–¹æ³•çš„åç§°ï¼Œå³å¯¹åº”æ’ä»¶å±‚çš„å…·ä½“æŸä¸€ä¸ªåŠŸèƒ½ã€‚å¦‚æœæˆ‘ä»¬æœ‰ä¸ä¹‹åŒ¹é…çš„åŠŸèƒ½å®ç°æ—¶æˆ‘ä»¬éœ€è¦è¿”å› true ï¼Œå¦åˆ™è¿”å› false å‘ŠçŸ¥å‰ç«¯è°ƒç”¨è€…è¿™æ˜¯ä¸€ä¸ªæ— æ•ˆçš„åŠ¨ä½œã€‚å½“è¿”å› false æ—¶ï¼Œ Cordova Framework ä¼šç»™å‰ç«¯è¿”å›ä¸€ä¸ª INVALID_ACTION çš„å¤±è´¥æ¶ˆæ¯ã€‚å½“è¿”å› true æ—¶éœ€è¦æˆ‘ä»¬è‡ªå·±é€šè¿‡ callbackContext æ¥è¿”å›æ¶ˆæ¯ã€‚</p>
<h4 id="c-callbackcontext-ç±»çš„ä½¿ç”¨">c. CallbackContext ç±»çš„ä½¿ç”¨</h4>
<p>å¯¹äºæ˜¯è¦è¿”å›å•æ¡è¿˜æ˜¯å¤šæ¡æ¶ˆæ¯éœ€è¦æ ¹æ®æ’ä»¶å®ç°çš„åŠŸèƒ½æ¥åˆ¤æ–­ã€‚å‡å¦‚æˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªè·å–è®¾å¤‡ä¿¡æ¯çš„æ’ä»¶åŠŸèƒ½ï¼Œé‚£ä¹ˆåªéœ€è¦è¿”å›ä¸€æ¡åŒ…å«è®¾å¤‡ä¿¡æ¯çš„æ¶ˆæ¯å°±å¯ä»¥äº†ã€‚å¦‚æœéœ€è¦å®ç°ç”µå­æ ‡ç­¾ç›˜ç‚¹æ­¤ç±»çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆæ’ä»¶åˆ™å°±éœ€è¦ä¸é—´æ–­çš„å‘å‰ç«¯è¿ç»­ä¼ é€’å¤šæ¡åŒ…å«ç”µå­æ ‡ç­¾å†…å®¹çš„æ¶ˆæ¯ã€‚ä¸ç®¡æ˜¯ä¼ é€’å•æ¡æ¶ˆæ¯è¿˜æ˜¯å¤šæ¡æ¶ˆæ¯æˆ‘ä»¬éƒ½æ˜¯å€ŸåŠ© CallbackContext ç±»æ¥å®ç°çš„ã€‚</p>
<h5 id="1-ä¼ é€’å•æ¡æ¶ˆæ¯">1. ä¼ é€’å•æ¡æ¶ˆæ¯</h5>
<pre><code>      // è°ƒç”¨erroræ–¹æ³•å°†ä¼šè§¦å‘å‰ç«¯çš„erroræ–¹æ³•å›è°ƒçš„æ‰§è¡Œ 
      callbackContext.error(&quot;error message.&quot;); 
      // è°ƒç”¨successæ–¹æ³•å°†ä¼šè§¦å‘å‰ç«¯successæ–¹æ³•å›è°ƒçš„æ‰§è¡Œ
      callbackContext.success(&quot;success message.&quot;);
</code></pre>
<p>ä½¿ç”¨ä¸Šè¿°çš„æ¶ˆæ¯ä¼ é€’æ–¹å¼ï¼ŒCordova Framework æ˜¯é»˜è®¤åªè°ƒç”¨ä¸€æ¬¡ callbackContext.error æˆ– success åå°±ä¸ä¼šå†å‘å‰ç«¯ç»§ç»­ä¼ é€’æ¶ˆæ¯ã€‚</p>
<h5 id="2-è¿ç»­ä¼ é€’å¤šæ¡æ¶ˆæ¯">2. è¿ç»­ä¼ é€’å¤šæ¡æ¶ˆæ¯</h5>
<pre><code> PluginResult pr = new PluginResult(PluginResult.Status.OK, jsonArray.toString());
 // ä¸€å®šè¦è®¾ç½®
 pr.setKeepCallback(true);
 callbackContext.sendPluginResult(pr);
</code></pre>
<p>é€šè¿‡ä»¥ä¸Šä»£ç æˆ‘ä»¬å¯ä»¥è¿ç»­å‘å‰ç«¯å‘é€å¤šæ¡æ¶ˆæ¯ï¼Œåœ¨åˆ›å»º PluginResult å¯¹è±¡æ—¶æˆ‘ä»¬é€šè¿‡ç¬¬ä¸€ä¸ªå‚æ•°è®¾ç½®å½“å‰æ¶ˆæ¯çš„æˆåŠŸæˆ–å¤±è´¥çš„çŠ¶æ€ï¼Œé€šè¿‡ç¬¬äºŒä¸ªå‚æ•°å‘é€å…·ä½“çš„æ¶ˆæ¯å†…å®¹ã€‚</p>
<p>å¦‚æœæ’ä»¶åŠŸèƒ½è°ƒç”¨åæ— æ³•ç«‹å³è·å–åˆ°å€¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹ä»£ç å…ˆå‘å‰ç«¯ä¼ é€’ä¸€ä¸ªç©ºå†…å®¹ã€‚ç­‰è·å–åˆ°å®é™…çš„å€¼æ—¶å†è°ƒç”¨ä¸Šé¢çš„æ–¹æ³•è¿”å›å…·ä½“çš„å€¼ã€‚</p>
<pre><code> PluginResult pr = new PluginResult(PluginResult.Status.NO_RESULT);
 pr.setKeepCallback(true);
 callbackContext.sendPluginResult(pr);
</code></pre>
<h4 id="4-å…³äºè€—æ—¶ä»»åŠ¡çš„å¤„ç†">4. å…³äºè€—æ—¶ä»»åŠ¡çš„å¤„ç†</h4>
<p>æˆ‘ä»¬åœ¨æ’ä»¶ä¸­ç¼–å†™çš„ä»£ç æ˜¯è¿è¡Œåœ¨ Android çš„ä¸»çº¿ç¨‹ä¸­çš„ï¼Œå¦‚æœåœ¨æ’ä»¶ä¸­æˆ‘ä»¬éœ€è¦åšä¸€äº›æ¯”è¾ƒè€—æ—¶çš„æ“ä½œï¼Œæ¯”å¦‚æ–‡ä»¶è¯»å†™ã€ç½‘ç»œè¯·æ±‚ã€éŸ³è§†é¢‘æ ¼å¼è½¬æ¢ç­‰ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº›è€—æ—¶ä»»åŠ¡çš„å¤„ç†é€»è¾‘æ”¾åˆ°å­çº¿ç¨‹ä¸­å»æ‰§è¡Œï¼Œå¦åˆ™å½“è€—æ—¶ä»»åŠ¡é˜»å¡ä¸»çº¿ç¨‹çš„æ—¶é—´è¿‡é•¿ä¼šå¯¼è‡´ ANR çš„å‘ç”Ÿã€‚å¦‚æœä»»åŠ¡æ‰§è¡Œçš„è€—æ—¶è¿‡é•¿ï¼ŒCordova Framework ä¹Ÿä¼šç»™å‡ºæˆ‘ä»¬å¦‚ä¸‹æç¤ºï¼Œæç¤ºæˆ‘ä»¬éœ€è¦å°†è¿™ä¸ªä»»åŠ¡æ”¾åˆ°å­çº¿ç¨‹ä¸­å»æ‰§è¡Œã€‚</p>
<pre><code>THREAD WARNING: exec() call to ToastPlugin.showToast blocked the main thread for 26ms. Plugin should use CordovaInterface.getThreadPool().
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ Cordova Framework å°è£…å¥½çš„çº¿ç¨‹æ± æ¥å¯åŠ¨çº¿ç¨‹ã€‚</p>
<pre><code>       cordova.getThreadPool().execute(new Runnable() {
            @Override
            public void run() {
                // Perform time-consuming operations
            }
        });
</code></pre>
<p>ğŸ‘¹ æ³¨æ„ï¼šä¸èƒ½åœ¨å­çº¿ç¨‹ä¸­åšä»»ä½•å’Œ UI æœ‰å…³çš„æ“ä½œï¼Œå¦åˆ™ä¼šå¯¼è‡´ç¨‹åºå´©æºƒã€‚å¦‚æœéœ€è¦æ›´æ–° UI è¯·ä½¿ç”¨Handler æˆ– getActivity().runOnUiThread() åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹åå†æ‰§è¡Œä¸UIç›¸å…³çš„æ“ä½œã€‚</p>
<h4 id="5-å¤„ç†æ’ä»¶çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶">5. å¤„ç†æ’ä»¶çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶</h4>
<h5 id="ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸ">ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸï¼Ÿ</h5>
<p>å½“ç”¨æˆ·æµè§ˆã€é€€å‡ºå’Œè¿”å›åˆ°ä½ çš„åº”ç”¨æ—¶ï¼Œåº”ç”¨ä¸­çš„ Activity çš„å®ä¾‹ä¼šåœ¨å…¶ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒçŠ¶æ€ä¹‹é—´è½¬æ¢ï¼ŒActivity ç±»ä¼šæä¾›è®¸å¤šå›è°ƒæ–¹æ³•ï¼Œè¿™äº›å›è°ƒæ–¹æ³•ä¼šè®© Activity çŸ¥æ™“æŸä¸ªçŠ¶æ€å·²ç»æ›´æ”¹ï¼Œç³»ç»Ÿæ­£åœ¨åˆ›å»ºã€åœæ­¢æˆ–æ¢å¤æŸä¸ª Activityï¼Œæˆ–æ­£åœ¨é”€æ¯è¯¥ Activity æ‰€åœ¨çš„è¿›ç¨‹ã€‚Cordova Framework ä¼šåŒæ­¥ WebView æ‰€å±çš„ Activity çš„ç”Ÿå‘½å‘¨æœŸçš„çŠ¶æ€åˆ° CordovaPluginã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡é‡å†™ CordovaPlugin ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥è®©æˆ‘ä»¬çš„æ’ä»¶èƒ½å¤Ÿå“åº”ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œä»¥æå‡åº”ç”¨çš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚</p>
<p>ä¸‹å›¾ä¸º Android ä¸€ä¸ª Activity çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼š</p>
<figure data-type="image" tabindex="3"><img src="https://developer.android.com/guide/components/images/activity_lifecycle.png?hl=zh-cn" alt="" loading="lazy"></figure>
<h5 id="cordovaplugin-ä¸­çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒæ–¹æ³•">CordovaPlugin ä¸­çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒæ–¹æ³•</h5>
<p>åœ¨ç¼–å†™æ’ä»¶æ—¶ï¼Œä¸€èˆ¬æˆ‘ä»¬åªéœ€è¦å¯¹ä¸‹é¢ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•è¿›è¡Œå¤„ç†ï¼š</p>
<ol>
<li>onPauseï¼šå½“åº”ç”¨ç”±å¯è§å˜ä¸ºä¸å¯è§æ—¶æ‰§è¡Œè¯¥å›è°ƒï¼Œæ¯”å¦‚æˆ‘ä»¬æŒ‰homeé”®è¿”å›ä¸»é¡µæ—¶ã€‚ä¸€èˆ¬æˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æš‚åœæ’ä»¶çš„æ‰§è¡Œï¼Œæ¯”å¦‚æš‚åœæ’ä»¶å¯¹rfidæ ‡ç­¾çš„æ‰«æåŠŸèƒ½ã€‚</li>
<li>onResumeï¼šå½“åº”ç”¨ç”±ä¸å¯è§å˜ä¸ºå¯è§æ—¶ä¼šæ‰§è¡Œè¯¥å›è°ƒï¼Œæ¯”å¦‚æˆ‘ä»¬ç‚¹å‡»åº”ç”¨å›¾æ ‡é‡æ–°å›åˆ°åº”ç”¨ä¸­æ—¶ã€‚ä¸€èˆ¬æˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸ªæ–¹æ³•ä¸­æ¢å¤è¢«æš‚åœçš„æ“ä½œï¼Œæ¯”å¦‚æ¢å¤æ’ä»¶å¯¹rfidæ ‡ç­¾æ‰«æçš„åŠŸèƒ½ã€‚</li>
<li>onDestoryï¼šå½“ç”¨æˆ·é€€å‡ºåº”ç”¨æ—¶å›è°ƒï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦åœ¨è¯¥å›è°ƒæ–¹æ³•ä¸­æ‰§è¡Œä¸€äº›èµ„æºé‡Šæ”¾çš„æ“ä½œã€‚</li>
</ol>
<h3 id="5-å°†å¼€å‘å¥½çš„åŠŸèƒ½æŠ½å–ä¸ºå•ç‹¬çš„æ’ä»¶åŒ…">5. å°†å¼€å‘å¥½çš„åŠŸèƒ½æŠ½å–ä¸ºå•ç‹¬çš„æ’ä»¶åŒ…</h3>
<p>è¿™ä¸€æ­¥æ¯”è¾ƒé‡è¦ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒå®¹æ˜“å‡ºé”™çš„ä¸€æ­¥ã€‚æˆ‘ä»¬åœ¨å¼€å‘æ’ä»¶åŠŸèƒ½æ—¶éœ€è¦ç‰¹åˆ«å…³æ³¨åœ¨æ’ä»¶å¼€å‘çš„è¿‡ç¨‹ä¸­æ·»åŠ çš„æºä»£ç æ–‡ä»¶ã€èµ„æºæ–‡ä»¶ã€å¼•å…¥çš„ä¸‰æ–¹åº“ï¼Œå› ä¸ºåœ¨æŠ½å–ä¸ºå•ç‹¬çš„æ’ä»¶åŒ…æ—¶æˆ‘ä»¬éœ€è¦å°†å¼€å‘è¿™ä¸ªåŠŸèƒ½æ—¶æ·»åŠ çš„æ‰€æœ‰å†…å®¹æ‹·è´åˆ°ç¬¬ä¸€æ­¥æˆ‘ä»¬åˆ›å»ºçš„æ’ä»¶åŒ…ä¸­ï¼Œå¹¶æ ¹æ® platforms/android ä¸­çš„ç›®å½•ç»“æ„æ¥é…ç½® plugin.xmlã€‚</p>
<p>åœ¨æŠ½å–å‰æˆ‘ä»¬å†æ¥æ£€æŸ¥ä¸‹ä¸ºäº†å®ç°è¿™ä¸ªæ’ä»¶åŠŸèƒ½æ·»åŠ äº†å“ªäº›å†…å®¹ï¼š</p>
<ol>
<li>MsgInfo.java</li>
<li>ToastPlugin.java</li>
<li>é€šè¿‡ Gradle ç‰ˆæœ¬æ„å»ºå·¥å…·å¼•å…¥äº† Gson</li>
</ol>
<p>ç¬¬ä¸€æ­¥ï¼šæ‹·è´æ–°å¢æ–‡ä»¶åˆ°æ’ä»¶åŒ…ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æºä»£ç çš„åŠŸèƒ½æ¥ç»„ç»‡æ–‡ä»¶çš„å­˜æ”¾ä½ç½®ã€‚æºä»£ç å­˜æ”¾åœ¨ src/android ä¸‹ã€‚</p>
<figure data-type="image" tabindex="4"><img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/1599207991027.png" alt="" loading="lazy"></figure>
<p>ç¬¬äºŒæ­¥ï¼šç¼–å†™ plugin.xml æ–‡ä»¶ã€‚</p>
<pre><code>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;plugin id=&quot;com.zijin.toastplugin&quot; version=&quot;1.0.0&quot; xmlns=&quot;http://apache.org/cordova/ns/plugins/1.0&quot;
        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;
    &lt;name&gt;ToastPlugin&lt;/name&gt;
    &lt;js-module name=&quot;ToastPlugin&quot; src=&quot;www/ToastPlugin.js&quot;&gt;
        &lt;clobbers target=&quot;cordova.plugins.ToastPlugin&quot;/&gt;
    &lt;/js-module&gt;
    &lt;platform name=&quot;android&quot;&gt;
        &lt;config-file parent=&quot;/*&quot; target=&quot;res/xml/config.xml&quot;&gt;
            &lt;feature name=&quot;ToastPlugin&quot;&gt;
                &lt;param name=&quot;android-package&quot; value=&quot;com.zijin.toastplugin.ToastPlugin&quot;/&gt;
            &lt;/feature&gt;
        &lt;/config-file&gt;
        &lt;config-file parent=&quot;/*&quot; target=&quot;AndroidManifest.xml&quot;&gt;
        &lt;/config-file&gt;
        &lt;source-file src=&quot;src/android/main/ToastPlugin.java&quot; target-dir=&quot;src/com/zijin/toastplugin&quot;/&gt;
        &lt;source-file src=&quot;src/android/model/MsgInfo.java&quot; target-dir=&quot;src/com/zijin/toastplugin&quot;/&gt;
        &lt;framework src=&quot;com.google.code.gson:gson:2.6.1&quot; /&gt;
    &lt;/platform&gt;
&lt;/plugin&gt;
</code></pre>
<p>åœ¨æ–‡ç« çš„ä¸€å¼€å§‹å°±å·²ç»ä»‹ç»è¿‡å…³äº plugin.xml ä¸­æ ‡ç­¾çš„ä½œç”¨ã€‚è¿™é‡Œè¦å¼ºè°ƒ source-file æ ‡ç­¾ä¸­ src å±æ€§çš„å€¼ä¸ºæ–‡ä»¶åœ¨æ’ä»¶åŒ…ä¸­çš„è·¯å¾„ï¼Œä½† target-dir å°±ä¸€å®šéœ€è¦ä¸¥æ ¼æŒ‰ç…§ä¹‹å‰æˆ‘ä»¬åœ¨Android å±‚å®ç°åŠŸèƒ½çš„ç›®å½•ç»“æ„æ¥æ·»åŠ ã€‚</p>
<figure data-type="image" tabindex="5"><img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/1599208949155.png" alt="" loading="lazy"></figure>
<p>é€šè¿‡ä½¿ç”¨ framework æ ‡ç­¾åœ¨ src å±æ€§ä¸­å¡«å†™ Gson å¯¹åº”çš„ä¾èµ–åœ°å€æ¥æ¥å®Œæˆå¯¹ Gson åº“çš„å¼•å…¥ã€‚</p>
<p>å…³äº plugin.xml çš„è¯¦ç»†é…ç½®è¯´æ˜è¯·å‚è€ƒï¼šhttps://cordova.apache.org/docs/en/latest/plugin_ref/spec.html</p>
<p>å½“æˆ‘ä»¬å®Œæˆä¸Šé¢çš„å‡ æ­¥é…ç½®åï¼Œé‡æ–°å®‰è£…æ’ä»¶åŒ…å†è¿è¡Œ app æ¥æµ‹è¯•æ’ä»¶åŒ…çš„æŠ½å–æ˜¯å¦æˆåŠŸã€‚</p>
<h3 id="6-ä¸ºæˆ‘ä»¬ç¼–å†™çš„æ’ä»¶åˆ›å»º-ionic-native-åŒ…è£…">6. ä¸ºæˆ‘ä»¬ç¼–å†™çš„æ’ä»¶åˆ›å»º Ionic Native åŒ…è£…</h3>
<p>é€šè¿‡ä»¥ä¸Šäº”æ­¥æˆ‘ä»¬å·²ç»å®Œæˆäº†ä¸€ä¸ª Cordova æ’ä»¶çš„ç¼–å†™ï¼Œä½†åŸºäº Cordova ç¼–å†™çš„æ’ä»¶æš´éœ²ç»™å‰ç«¯è°ƒç”¨çš„ä»£ç æ˜¯é€šè¿‡ JavaScript è¯­è¨€ç¼–å†™çš„ï¼ˆwww/ToastPlugin.jsï¼‰ï¼Œè€Œ Ionic åŸºäº TypeScript ï¼Œä¸ºäº†èƒ½å¤Ÿåœ¨ Ionic ç«¯å®ç°æ›´å®¹æ˜“å’Œç»Ÿä¸€çš„åŠŸèƒ½è°ƒç”¨ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ Ionic Native æ¥å¯¹å·²ç»ç¼–å†™å¥½çš„ Cordova æ’ä»¶è¿›è¡Œä¸€å±‚åŒ…è£…ã€‚Ionic Native å°†æ’ä»¶ä¸­æ–¹æ³•çš„æˆåŠŸæˆ–å¤±è´¥çš„å›è°ƒåŒ…è£…åœ¨ Promise æˆ– Observable ä¸­ï¼Œä¸ºæ‰€æœ‰æ’ä»¶æä¾›é€šç”¨æ¥å£ã€‚</p>
<h4 id="ç¼–å†™ä¸€ä¸ª-ionic-native-åŒ…è£…çš„æ­¥éª¤">ç¼–å†™ä¸€ä¸ª Ionic Native åŒ…è£…çš„æ­¥éª¤ï¼š</h4>
<ol>
<li>
<p>ä» Github å…‹éš† ionic-native é¡¹ç›®åˆ°æœ¬åœ°ï¼Œåé¢å‘½ä»¤çš„æ‰§è¡Œå’Œæ’ä»¶æ–‡ä»¶æ¨¡ç‰ˆçš„ç”Ÿæˆéœ€è¦ä¾èµ–æ­¤ç¯å¢ƒã€‚</p>
<p>åœ°å€ï¼šhttps://github.com/ionic-team/ionic-native</p>
</li>
<li>
<p>è¿›å…¥å…‹éš†ä¸‹æ¥çš„ ionic-native çš„æ ¹ç›®å½•</p>
</li>
<li>
<p>åˆ›å»ºæ’ä»¶åŒ…</p>
<pre><code>// è°ƒç”¨æ­¤å‘½ä»¤ï¼Œå¹¶å°†`PluginName`æ›¿æ¢ä¸ºå¸Œæœ›æ·»åŠ çš„æ’ä»¶åç§°
// ç¬¬ä¸€ä¸ªå­—æ¯ä¸€å®šè¦å¤§å†™ï¼Œä½¿ç”¨å¤§é©¼å³°å‘½å
gulp plugin:create -n PluginName
</code></pre>
<p>æ‰§è¡Œå®Œä»¥ä¸Šå‘½ä»¤å°†ä¼šåœ¨src/@ionic-native/pluginsç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåç§°ä¸ºPluginNameçš„æ’ä»¶ç›®å½•ï¼Œé‡Œé¢æœ‰ä¸€ä¸ª index.ts æ–‡ä»¶ï¼Œåé¢ Ionic æ’ä»¶çš„ç¼–å†™è¦åŸºäºè¯¥æ–‡ä»¶ã€‚</p>
</li>
<li>
<p>å¼€å§‹ç¼–å†™ index.ts æ–‡ä»¶</p>
<pre><code>@Plugin({
pluginName: 'ZijinUtilPlugin',
plugin: 'cordova-plugin-x-zijinutil', // npm package name, example: cordova-plugin-camera
pluginRef: 'cordova.plugins.ZijinUtil', // the variable reference to call the plugin, example: navigator.geolocation
platforms: ['Android'] // Array of platforms supported, example: ['Android', 'iOS']
})
@Injectable()
export class ZijinUtilPlugin extends IonicNativePlugin {
}
</code></pre>
<p>è¿™é‡Œéœ€è¦é‡ç‚¹æŒ‡å‡ºçš„æ˜¯ @Pluginè£…é¥°å™¨ä¸­æ¯ä¸ªå‚æ•°çš„ä½œç”¨ï¼š</p>
<ol>
<li>pluginRefï¼šæŒ‡çš„æ˜¯å‰ç«¯å¯¹ Cordova æ’ä»¶çš„è°ƒç”¨å¯¹è±¡ï¼Œè¿™ä¸ªå€¼å’Œ Cordova æ’ä»¶ä¸­çš„ plugin.xml ä¸‹çš„ clobbers èŠ‚ç‚¹çš„å±æ€§å€¼ç›¸åŒã€‚</li>
<li>pluginï¼šå€¼çš„æ˜¯ npm åŒ…çš„åç§°ã€‚</li>
</ol>
</li>
<li>
<p>é€šè¿‡åœ¨ ionc native çš„æ ¹ç›®å½•è°ƒç”¨ npm run build æ¥è¿›è¡Œç¼–è¯‘ï¼Œæœ€åç¼–è¯‘ç”Ÿæˆçš„ ionic native åŒ…è£…ä¼šç”Ÿæˆåˆ° ionic-native/dist/@ionic-native/plugins ç›®å½•ã€‚</p>
</li>
</ol>
<h4 id="æ ¹æ®ä¸Šè¿°æ­¥éª¤ä¸º-toastplugin-æ’ä»¶åˆ›å»º-ionic-native-åŒ…è£…">æ ¹æ®ä¸Šè¿°æ­¥éª¤ä¸º ToastPlugin æ’ä»¶åˆ›å»º Ionic Native åŒ…è£…</h4>
<ol>
<li>
<p>é€šè¿‡å¦‚ä¸‹å‘½ä»¤åˆ›å»º ToastPlugin çš„ index.ts æ–‡ä»¶ï¼Œåœ¨ /src/@ionic-native/plugins/toast-plugin-wrapper/ ä¸‹å¯ä»¥æ‰¾åˆ°è¯¥æ–‡ä»¶ã€‚</p>
<pre><code> gulp plugin:create -n ToastPluginWrapper 
</code></pre>
</li>
<li>
<p>ç¼–å†™ index.ts æ–‡ä»¶</p>
<pre><code>import { Injectable } from '@angular/core';
import { Plugin, Cordova, CordovaProperty, CordovaInstance, InstanceProperty, IonicNativePlugin } from '@ionic-native/core';
import { Observable } from 'rxjs';
@Plugin({
pluginName: 'ToastPluginWrapper',
plugin: 'cordova-plugin-toast',
pluginRef: 'cordova.plugins.ToastPlugin',
platforms: ['Android']
})
@Injectable()
export class ToastPluginWrapper extends IonicNativePlugin {

@Cordova()
showToast(msgInfo: MsgInfo): Promise&lt;string&gt; {
    return;
}

}

export interface MsgInfo {
msg: string;
showLength: string;
}
</code></pre>
<p>âš ï¸ æ³¨æ„ index.ts æ–‡ä»¶ä¸­å£°æ˜æ’ä»¶æ–¹æ³•çš„è¿”å›å€¼çš„ç±»å‹éœ€è¦æ ¹æ® Android å±‚å®ç°çš„æ’ä»¶åŠŸèƒ½æ˜¯è¦å‘å‰ç«¯å‘é€ä¸€æ¬¡æ¶ˆæ¯è¿˜æ˜¯å¤šæ¬¡ã€‚</p>
<ol>
<li>
<p>å‘å‰ç«¯åªå‘é€ä¸€æ¬¡æ¶ˆæ¯ï¼šä½¿ç”¨ Promise ä½œä¸ºæ’ä»¶æ–¹æ³•çš„è¿”å›å€¼ç±»å‹</p>
</li>
<li>
<p>å‘å‰ç«¯å‘é€å¤šæ¬¡æ¶ˆæ¯ï¼š ä½¿ç”¨ Observable ä½œä¸ºæ’ä»¶æ–¹æ³•çš„è¿”å›å€¼ç±»å‹</p>
</li>
</ol>
</li>
<li>
<p>é€šè¿‡åœ¨ ionic-native çš„æ ¹è·¯å¾„ä¸‹ä½¿ç”¨<code>npm run build</code> å‘½ä»¤ç¼–è¯‘æºç æ¥ç”Ÿæˆ ionic åŒ…è£…æ–‡ä»¶ï¼Œç”ŸæˆåŒ…è£…æ–‡ä»¶çš„ä½ç½® /dist/@ionic-native/plugins/<br>
<img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/1599217663066.png" alt="" loading="lazy"></p>
</li>
</ol>
<h4 id="å¯èƒ½ä¼šé‡åˆ°åˆ°ä¸€äº›å‘">ğŸ‘¹ å¯èƒ½ä¼šé‡åˆ°åˆ°ä¸€äº›å‘</h4>
<ol>
<li>
<p>åœ¨ ionic-native ä¸‹ç¼–è¯‘ç”Ÿæˆçš„ç±»å‹å£°æ˜åŒ…ä¸­çš„ JavaScript æ–‡ä»¶å†…ä¼šå¯¹ cordova è¿›è¡Œé‡å¤å¼•ç”¨ï¼š</p>
<p><img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/1599219722709.png" alt="" loading="lazy"><br>
è§£å†³æ–¹æ³•ï¼šåˆ é™¤å¤šä½™å¼•å…¥çš„ cordova æ¨¡å—</p>
</li>
<li>
<p>åœ¨ç±»å‹å£°æ˜æ–‡ä»¶ index.d.ts ä¸­ä¸ºè°ƒç”¨ Native å±‚åŠŸèƒ½çš„æ–¹æ³•çš„è¿”å›ç»“æœæŒ‡å®šä¸º Observable ä¸ç”Ÿæ•ˆï¼š</p>
<p>index.d.tsæ–‡ä»¶å†…éƒ¨æ–¹æ³•å£°æ˜ï¼š</p>
<pre><code>@cordova()
openScanReceiver(): Observable&lt;any&gt; {
return;
}
</code></pre>
<p>è§£å†³æ–¹æ³•ï¼š<br>
<img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/1599219912658.png" alt="" loading="lazy"><br>
ç»™ä»¥ä¸Šæˆªå›¾ä¸­çš„ä¸¤ä¸ªindex.jsè¡¥å…… {&quot;observable&quot;: true }</p>
</li>
<li>
<p>å¦‚æœéœ€è¦ä¸º Cordova æ’ä»¶å†™ä¸€ä¸ª IonicNative åŒ…è£…æ—¶ï¼Œéœ€è¦æ³¨æ„å°†ä¼ é€’çš„å‚æ•°å†™åœ¨æœ€å‰é¢ã€‚</p>
<pre><code>// ğŸ™†ğŸ»â€â™‚ï¸æ­£ç¡®
exports.startService = function (interval, success, error) {
    exec(success, error, 'BackgroundTask', 'startService', [interval]);
};
// ğŸ™…ğŸ»â€â™‚ï¸é”™è¯¯ï¼ŒAndroid å±‚å°†æ— æ³•è·å–ä¼ é€’çš„å‚æ•°
exports.startService = function (success, errorï¼Œinterval) {
    exec(success, error, 'BackgroundTask', 'startService', [interval]);
};
</code></pre>
</li>
</ol>
<h3 id="7-åœ¨é¡¹ç›®ä¸­é€šè¿‡-ionic-native-åŒ…è£…è°ƒç”¨-cordova-æ’ä»¶åŠŸèƒ½">7. åœ¨é¡¹ç›®ä¸­é€šè¿‡ Ionic Native åŒ…è£…è°ƒç”¨ Cordova æ’ä»¶åŠŸèƒ½</h3>
<ol>
<li>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å°†ä¸Šä¸€æ­¥ç”Ÿæˆçš„ toast-plugin-wrapper æ–‡ä»¶å¤¹æ‹·è´åˆ°é¡¹ç›®ä¸‹ã€‚</p>
<img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/1599219056901.png" width = "600" />
</li>
<li>
<p>åœ¨ appModule ä¸­çš„ NgModule å…ƒæ•°æ®ä¸­å°†è¯¥æœåŠ¡æä¾›å‡ºå»ï¼Œä»¥å…è®¸å¤–éƒ¨é€šè¿‡ä¾èµ–æ³¨å…¥çš„æ–¹å¼å®ä¾‹åŒ–è¯¥æ’ä»¶ã€‚</p>
<img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/1599219176283.png" width = "600" />
</li>
<li>
<p>è°ƒç”¨æ’ä»¶çš„åŠŸèƒ½ã€‚</p>
 <img src="https://blog-1252413502.cos.ap-shanghai.myqcloud.com/1599219523194.png" width = "600" />
</li>
</ol>
<h3 id="ç»“æŸ">ğŸŠç»“æŸ</h3>
<p>ç¤ºä¾‹ä»£ç åœ°å€ï¼šhttps://github.com/Merpyzf/PluginPractice</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E5%BC%80%E5%A7%8B%E5%89%8D%E5%87%86%E5%A4%87">å¼€å§‹å‰å‡†å¤‡</a>
<ul>
<li><a href="#1-%E6%89%80%E9%9C%80%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83">1. æ‰€éœ€å¼€å‘ç¯å¢ƒ</a></li>
<li><a href="#2-%E6%89%80%E9%9C%80%E5%89%8D%E7%BD%AE%E6%8A%80%E8%83%BD">2. æ‰€éœ€å‰ç½®æŠ€èƒ½</a></li>
</ul>
</li>
<li><a href="#%E6%8F%92%E4%BB%B6%E7%BC%96%E5%86%99%E5%BC%80%E5%8F%91%E5%AE%9E%E8%B7%B5">æ’ä»¶ç¼–å†™å¼€å‘å®è·µ</a>
<ul>
<li><a href="#%E6%A1%88%E4%BE%8B%E8%BF%90%E8%A1%8C%E6%95%88%E6%9E%9C">æ¡ˆä¾‹è¿è¡Œæ•ˆæœï¼š</a></li>
</ul>
</li>
<li><a href="#1-%E5%88%9B%E5%BB%BA%E6%8F%92%E4%BB%B6%E5%8C%85">1. åˆ›å»ºæ’ä»¶åŒ…</a>
<ul>
<li><a href="#%E4%BD%BF%E7%94%A8-plugman-cli-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%A9%BA%E7%9A%84%E6%8F%92%E4%BB%B6">ä½¿ç”¨ Plugman CLI åˆ›å»ºä¸€ä¸ªç©ºçš„æ’ä»¶</a>
<ul>
<li><a href="#a-%E8%BF%9B%E5%85%A5%E5%88%B0%E8%87%AA%E5%B7%B1%E5%AD%98%E6%94%BE%E6%8F%92%E4%BB%B6%E7%9A%84%E7%9B%AE%E5%BD%95">a. è¿›å…¥åˆ°è‡ªå·±å­˜æ”¾æ’ä»¶çš„ç›®å½•</a></li>
<li><a href="#b-%E6%89%A7%E8%A1%8C%E5%A6%82%E4%B8%8B%E5%91%BD%E4%BB%A4%E5%88%9B%E5%BB%BA%E6%8F%92%E4%BB%B6-%E6%B7%BB%E5%8A%A0%E6%8F%92%E4%BB%B6%E6%89%80%E8%A6%81%E6%94%AF%E6%8C%81%E7%9A%84%E5%B9%B3%E5%8F%B0">b. æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ›å»ºæ’ä»¶ &amp; æ·»åŠ æ’ä»¶æ‰€è¦æ”¯æŒçš„å¹³å°</a></li>
</ul>
</li>
<li><a href="#%E7%94%9F%E6%88%90%E6%8F%92%E4%BB%B6%E5%8C%85%E4%B8%AD%E6%AF%8F%E4%B8%AA%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%9C%E7%94%A8">ç”Ÿæˆæ’ä»¶åŒ…ä¸­æ¯ä¸ªæ–‡ä»¶çš„ä½œç”¨ï¼š</a>
<ul>
<li><a href="#a-pluginxml">a. plugin.xml</a></li>
<li><a href="#b-srcandroidtoastpluginjava">b. src/android/ToastPlugin.java</a></li>
<li><a href="#c-wwwtoastpluginjs">c. www/ToastPlugin.js</a></li>
</ul>
</li>
<li><a href="#%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0%E5%90%AB%E4%B9%89">å‘½ä»¤å‚æ•°å«ä¹‰</a></li>
</ul>
</li>
<li><a href="#2-%E5%B0%86%E7%A9%BA%E7%9A%84%E6%8F%92%E4%BB%B6%E5%8C%85%E5%AE%89%E8%A3%85%E5%88%B0-ionic-%E9%A1%B9%E7%9B%AE">2. å°†ç©ºçš„æ’ä»¶åŒ…å®‰è£…åˆ° ionic é¡¹ç›®</a>
<ul>
<li><a href="#a-%E7%BC%96%E5%86%99-wwwtoastpluginjs-%E5%AE%9A%E4%B9%89%E6%8F%92%E4%BB%B6%E5%8A%9F%E8%83%BD%E6%96%B9%E6%B3%95">a. ç¼–å†™ www/ToastPlugin.js å®šä¹‰æ’ä»¶åŠŸèƒ½æ–¹æ³•</a></li>
<li><a href="#b-%E8%BF%9B%E5%85%A5%E5%88%B0%E6%8F%92%E4%BB%B6%E5%8C%85%E6%89%80%E5%9C%A8%E7%9A%84%E7%9B%AE%E5%BD%95%E4%BD%BF%E7%94%A8-npm-init-%E5%91%BD%E4%BB%A4%E5%88%9D%E5%A7%8B%E5%8C%96%E6%8F%92%E4%BB%B6%E5%8C%85%EF%B8%8F%E5%90%A6%E5%88%99%E6%97%A0%E6%B3%95%E6%89%A7%E8%A1%8C%E5%90%8E%E7%BB%AD%E6%AD%A5%E9%AA%A4">b. è¿›å…¥åˆ°æ’ä»¶åŒ…æ‰€åœ¨çš„ç›®å½•ï¼Œä½¿ç”¨ npm init å‘½ä»¤åˆå§‹åŒ–æ’ä»¶åŒ…ï¼ˆâš ï¸å¦åˆ™æ— æ³•æ‰§è¡Œåç»­æ­¥éª¤ï¼‰</a></li>
<li><a href="#c-%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6%E5%88%B0-ionic-%E9%A1%B9%E7%9B%AE">c. å®‰è£…æ’ä»¶åˆ° ionic é¡¹ç›®</a></li>
<li><a href="#3-%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90%E5%B9%B3%E5%8F%B0%E4%BB%A3%E7%A0%81">3. ç¼–è¯‘ç”Ÿæˆå¹³å°ä»£ç </a></li>
<li><a href="#4-%E4%BD%BF%E7%94%A8-androidstudio-%E5%AF%BC%E5%85%A5%E7%94%9F%E6%88%90%E7%9A%84%E5%B9%B3%E5%8F%B0%E4%BB%A3%E7%A0%81">4. ä½¿ç”¨ AndroidStudio å¯¼å…¥ç”Ÿæˆçš„å¹³å°ä»£ç </a></li>
<li><a href="#a-%E6%89%93%E5%BC%80-androidstuido-%E9%80%89%E6%8B%A9-open-an-existing-android-studio-project">a. æ‰“å¼€ AndroidStuido é€‰æ‹© Open an existing android studio project</a></li>
<li><a href="#b-%E9%80%89%E6%8B%A9-platformsandroid-%E6%89%80%E5%9C%A8%E7%9A%84%E7%9B%AE%E5%BD%95%E6%89%A7%E8%A1%8C%E5%AF%BC%E5%85%A5">b. é€‰æ‹© platforms/android  æ‰€åœ¨çš„ç›®å½•æ‰§è¡Œå¯¼å…¥ã€‚</a></li>
<li><a href="#c-gradle%E6%9E%84%E5%BB%BA%E6%88%90%E5%8A%9F">c. Gradleæ„å»ºæˆåŠŸ</a></li>
<li><a href="#d-%E8%BF%90%E8%A1%8C%E9%A1%B9%E7%9B%AE%E5%88%B0%E8%AE%BE%E5%A4%87">d. è¿è¡Œé¡¹ç›®åˆ°è®¾å¤‡</a></li>
<li><a href="#4-%E5%BC%80%E5%A7%8B%E6%8F%92%E4%BB%B6%E5%8A%9F%E8%83%BD%E5%BC%80%E5%8F%91">4. å¼€å§‹æ’ä»¶åŠŸèƒ½å¼€å‘</a></li>
<li><a href="#%E5%85%B3%E4%BA%8E%E4%B8%8A%E9%9D%A2%E7%9A%84%E4%BB%A3%E7%A0%81%E9%9C%80%E8%A6%81%E6%B3%A8%E6%84%8F%E7%9A%84%E5%87%A0%E4%B8%AA%E7%82%B9">å…³äºä¸Šé¢çš„ä»£ç éœ€è¦æ³¨æ„çš„å‡ ä¸ªç‚¹ï¼š</a>
<ul>
<li><a href="#a-%E5%AF%B9%E4%BA%8E%E8%A6%81%E5%AE%9E%E7%8E%B0%E6%8F%92%E4%BB%B6%E5%8A%9F%E8%83%BD%E7%9A%84%E7%B1%BB%E9%9C%80%E8%A6%81%E7%BB%A7%E6%89%BF-cordovaplugin-%E5%B9%B6%E9%87%8D%E5%86%99-execute-%E6%96%B9%E6%B3%95%E6%9D%A5%E5%A4%84%E7%90%86%E5%89%8D%E7%AB%AF%E5%AF%B9%E6%8F%92%E4%BB%B6%E5%8A%9F%E8%83%BD%E7%9A%84%E8%B0%83%E7%94%A8">a. å¯¹äºè¦å®ç°æ’ä»¶åŠŸèƒ½çš„ç±»éœ€è¦ç»§æ‰¿ CordovaPlugin å¹¶é‡å†™ execute æ–¹æ³•æ¥å¤„ç†å‰ç«¯å¯¹æ’ä»¶åŠŸèƒ½çš„è°ƒç”¨ã€‚</a></li>
<li><a href="#b-execute-%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0%E5%8F%8A%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E4%BD%9C%E7%94%A8">b. execute æ–¹æ³•å‚æ•°åŠè¿”å›å€¼çš„ä½œç”¨ã€‚</a>
<ul>
<li><a href="#execute-%E6%96%B9%E6%B3%95%E7%9A%84%E4%B8%89%E4%B8%AA%E5%8F%82%E6%95%B0%E7%9A%84%E5%90%AB%E4%B9%89">execute æ–¹æ³•çš„ä¸‰ä¸ªå‚æ•°çš„å«ä¹‰ï¼š</a></li>
<li><a href="#execute-%E6%96%B9%E6%B3%95%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E5%90%AB%E4%B9%89">execute æ–¹æ³•è¿”å›å€¼çš„å«ä¹‰ï¼š</a></li>
</ul>
</li>
<li><a href="#c-callbackcontext-%E7%B1%BB%E7%9A%84%E4%BD%BF%E7%94%A8">c. CallbackContext ç±»çš„ä½¿ç”¨</a>
<ul>
<li><a href="#1-%E4%BC%A0%E9%80%92%E5%8D%95%E6%9D%A1%E6%B6%88%E6%81%AF">1. ä¼ é€’å•æ¡æ¶ˆæ¯</a></li>
<li><a href="#2-%E8%BF%9E%E7%BB%AD%E4%BC%A0%E9%80%92%E5%A4%9A%E6%9D%A1%E6%B6%88%E6%81%AF">2. è¿ç»­ä¼ é€’å¤šæ¡æ¶ˆæ¯</a></li>
</ul>
</li>
<li><a href="#4-%E5%85%B3%E4%BA%8E%E8%80%97%E6%97%B6%E4%BB%BB%E5%8A%A1%E7%9A%84%E5%A4%84%E7%90%86">4. å…³äºè€—æ—¶ä»»åŠ¡çš„å¤„ç†</a></li>
<li><a href="#5-%E5%A4%84%E7%90%86%E6%8F%92%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E4%BA%8B%E4%BB%B6">5. å¤„ç†æ’ä»¶çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶</a>
<ul>
<li><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">ä»€ä¹ˆæ˜¯ç”Ÿå‘½å‘¨æœŸï¼Ÿ</a></li>
<li><a href="#cordovaplugin-%E4%B8%AD%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%9E%E8%B0%83%E6%96%B9%E6%B3%95">CordovaPlugin ä¸­çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒæ–¹æ³•</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#5-%E5%B0%86%E5%BC%80%E5%8F%91%E5%A5%BD%E7%9A%84%E5%8A%9F%E8%83%BD%E6%8A%BD%E5%8F%96%E4%B8%BA%E5%8D%95%E7%8B%AC%E7%9A%84%E6%8F%92%E4%BB%B6%E5%8C%85">5. å°†å¼€å‘å¥½çš„åŠŸèƒ½æŠ½å–ä¸ºå•ç‹¬çš„æ’ä»¶åŒ…</a></li>
<li><a href="#6-%E4%B8%BA%E6%88%91%E4%BB%AC%E7%BC%96%E5%86%99%E7%9A%84%E6%8F%92%E4%BB%B6%E5%88%9B%E5%BB%BA-ionic-native-%E5%8C%85%E8%A3%85">6. ä¸ºæˆ‘ä»¬ç¼–å†™çš„æ’ä»¶åˆ›å»º Ionic Native åŒ…è£…</a>
<ul>
<li><a href="#%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA-ionic-native-%E5%8C%85%E8%A3%85%E7%9A%84%E6%AD%A5%E9%AA%A4">ç¼–å†™ä¸€ä¸ª Ionic Native åŒ…è£…çš„æ­¥éª¤ï¼š</a></li>
<li><a href="#%E6%A0%B9%E6%8D%AE%E4%B8%8A%E8%BF%B0%E6%AD%A5%E9%AA%A4%E4%B8%BA-toastplugin-%E6%8F%92%E4%BB%B6%E5%88%9B%E5%BB%BA-ionic-native-%E5%8C%85%E8%A3%85">æ ¹æ®ä¸Šè¿°æ­¥éª¤ä¸º ToastPlugin æ’ä»¶åˆ›å»º Ionic Native åŒ…è£…</a></li>
<li><a href="#%E5%8F%AF%E8%83%BD%E4%BC%9A%E9%81%87%E5%88%B0%E5%88%B0%E4%B8%80%E4%BA%9B%E5%9D%91">ğŸ‘¹ å¯èƒ½ä¼šé‡åˆ°åˆ°ä¸€äº›å‘</a></li>
</ul>
</li>
<li><a href="#7-%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%80%9A%E8%BF%87-ionic-native-%E5%8C%85%E8%A3%85%E8%B0%83%E7%94%A8-cordova-%E6%8F%92%E4%BB%B6%E5%8A%9F%E8%83%BD">7. åœ¨é¡¹ç›®ä¸­é€šè¿‡ Ionic Native åŒ…è£…è°ƒç”¨ Cordova æ’ä»¶åŠŸèƒ½</a></li>
<li><a href="#%E7%BB%93%E6%9D%9F">ğŸŠç»“æŸ</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://merpyzf.github.io/post/git-pull-rebase-li-jie/">
              <h3 class="post-title">
                git pull â€“rebase ç†è§£
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://merpyzf.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
